<!DOCTYPE html>
 <html lang="en">
 <head>
     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Document</title>
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
     <!-- Bootstrap CSS -->
     <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
     <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
     <!-- Font Awesome -->
     <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Candal|Lora" rel="stylesheet">

    <!-- Custom Styling -->
    <link rel="stylesheet" href="style_02.css"> 


 </head>
 <body>


 <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="website 03.html">Cryptocurrency tracker</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
       
                    

      </ul>
      <form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search"  id="myinput" onkeyup="searchFun()">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
  </nav>


 
   <h1 class="text-center">CryptoCurrency</h1>


<div class="container">
  <table class="table" style="text-align: center;" id="myTable">
    <thead>
          <tr>
              <th>Currency</th>
              <th>value in USD</th>
          </tr>
    </thead>
    <tbody id="result"></tbody>

  </table>


</div>



     <script>
         

         var url = "http://api.coinlayer.com/live?access_key=3b6de33216db489bc90a39e1445422f5&target=USD";
         var httpRequest = new XMLHttpRequest();
         //1.make http request
         function makeRequest(){
             if(!httpRequest)
             {
                 alert("cannot make HTTP request")
                 return;
             }
             
             httpRequest.onreadystatechange = getResponse;
             httpRequest.open('GET',url);
             httpRequest.send();
        }
      
        function getResponse()
        {
            //IF RESPONSE IS READY
            if(httpRequest.readyState === XMLHttpRequest.DONE){
                      //If status is OK
                      if(httpRequest.status === 200){
                        
                        var responseText = httpRequest.responseText; 
                        var jsonResponse = JSON.parse(responseText);
                    insertIntoHTML(jsonResponse)
                        //console.log(jsonResponse) 
                    }
            }
        }














        function insertIntoHTML(jsonResponse){
  //insert data into html
 var resultBody = document.getElementById('result');
 //make sure that table is empty
 resultBody.innerHTML = "";
 var ratesObj = jsonResponse.rates;
 for(currency in ratesObj){
   resultBody.innerHTML += 
   '<tr class="table-primary">'+  
    //'<tr style="background-color:red">'+  //btc
    '<td>'+currency+'</td>'+
    '<td>'+ratesObj[currency]+'</td>'+
    '</tr>'


 }
}
// function insertIntoHTML(jsonResponse){
//   //insert data into html
//  var resultBody = document.getElementById('result');
//  //make sure that table is empty
//  resultBody.innerHTML = "";
//  var ratesObj = jsonResponse.rates;
//  for(currency in ratesObj){
//     '<tr class="table-primary">'+  
//     //'<tr style="background-color:red">'+  //btc
//     '<td>'+currency+'</td>'+
//     '<td>'+ratesObj[currency]+'</td>'+
//     '</tr>'
//    resultBody.innerHTML += 
// //    <table id="myTable">
//    '<table class="table-primary" id="myTable">'+  
//     '<tr>'
//     '<td>'+currency+'</td>'+
//     '<td>'+ratesObj[currency]+'</td>'+
//     '</tr>'
//     '</table>'


//  }
// }

        makeRequest();



        const searchFun = () =>{
            let filter = document.getElementById('myinput').value.toUpperCase();
            let myTable = document.getElementById('myTable');
            let tr = myTable.getElementsByTagName('tr');
            // let tr = myTable.getElementById('tr');
            for(var i=0; i<tr.length; i++){
                let td = tr[i].getElementsByTagName('td')[0];
                if(td){
                    let textvalue = td.textContent || td.innerHTML;

                    if(textvalue.toUpperCase().indexOf(filter) > -1){
                        tr[i].style.display = "";
                    }else{
                        tr[i].style.display = "none";

                    }
                }
            }
        }
        
       
     </script>
     <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
 </body>
 </html>